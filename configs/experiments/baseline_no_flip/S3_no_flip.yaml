# S3 No-Flip Configuration (Extreme Reversion)
# Version: v1
# Dataset: CME.MNQ
# Timeframe: 60 minutes
# Features: Non-directional context feature (volatility) + channel value feature
# Design: S3 already uses non-directional features - no adaptation needed

version: "v1"
strategy_id: "S3"
dataset_id: "CME.MNQ"
timeframe: 60
features:
  required:
    - name: "context_feature"
      timeframe_min: 60
      # Placeholder - actual feature name provided via params.context_feature_name
    - name: "value_feature"
      timeframe_min: 60
      # Placeholder - actual feature name provided via params.value_feature_name
  optional:
    - name: "filter_feature"
      timeframe_min: 60
      # Placeholder - actual feature name provided via params.filter_feature_name (optional)
params:
  filter_mode: "NONE"
  trigger_mode: "NONE"
  entry_mode: "MARKET_NEXT_OPEN"
  context_threshold: 0.0
  value_threshold: 0.1  # Low value for bb_pb (near lower band for extreme reversion)
  filter_threshold: 0.0
  context_feature_name: "atr_14"  # Volatility regime check (already non-directional)
  value_feature_name: "bb_pb_20"  # Oversold indicator (Bollinger %b, already non-directional)
  filter_feature_name: ""  # No filter feature when filter_mode=NONE
  order_qty: 1.0
allow_build: false
notes: |
  S3 No-Flip configuration for extreme reversion.
  
  Original S3 already uses non-directional features:
  - Context: atr_14 (volatility regime check) - NON-DIRECTIONAL
  - Value: bb_pb_20 (Bollinger %b) - NON-DIRECTIONAL
  
  No adaptation needed for No-Flip design.
  
  Logic:
  - Entry triggered when:
    1. atr_14 > 0.0 (always true for non-zero volatility)
    2. bb_pb_20 < 0.1 (price at extreme lower Bollinger Band)
  
  This creates a volatility-conditioned extreme reversion signal.
  
  Feature Verification:
  - atr_14: Available in registry (volatility family)
  - bb_pb_20: Available in registry (bb family)
  
  Both features are non-directional and comply with No-Flip design principles.
  
  Comparison with S2:
  - Same context feature (atr_14)
  - Same value feature (bb_pb_20)
  - Different value threshold: 0.1 (S3) vs 0.2 (S2)
  - S3 targets more extreme conditions for reversion trades
  
  Configuration is research-ready with allow_build=False.
  Features must be available in the feature cache.