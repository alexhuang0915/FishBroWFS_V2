# S2 Strategy Configuration (Pullback Continuation)
# Migrated from configs/strategies/S2.yaml
# Schema version: 1.0

version: "1.0"
strategy_id: "s2_v1"

# Determinism configuration
determinism:
  default_seed: 42

# Parameters schema
parameters:
  filter_mode:
    type: "choice"
    default: "NONE"
    choices: ["NONE", "THRESHOLD"]
    description: "Filter application mode"
  
  trigger_mode:
    type: "choice"
    default: "NONE"
    choices: ["NONE", "STOP", "CROSS"]
    description: "Trigger generation mode"
  
  entry_mode:
    type: "choice"
    default: "MARKET_NEXT_OPEN"
    choices: ["MARKET_NEXT_OPEN"]
    description: "Entry execution mode (only when trigger_mode=NONE)"
  
  context_threshold:
    type: "float"
    default: 0.0
    min: -2.0
    max: 2.0
    description: "Threshold for context_feature"
    step: 0.1
  
  value_threshold:
    type: "float"
    default: 0.2
    min: 0.0
    max: 1.0
    description: "Value feature threshold (near lower band for pullback)"
    step: 0.05
  
  filter_threshold:
    type: "float"
    default: 0.0
    min: -2.0
    max: 2.0
    description: "Filter feature threshold"
    step: 0.1
  
  context_feature_name:
    type: "string"
    default: "ema_40"
    description: "Context feature name (trend indicator)"
  
  value_feature_name:
    type: "string"
    default: "bb_pb_20"
    description: "Value feature name (pullback indicator)"
  
  filter_feature_name:
    type: "string"
    default: ""
    description: "Filter feature name (optional)"
  
  order_qty:
    type: "float"
    default: 1.0
    min: 0.1
    max: 10.0
    description: "Order quantity"
    step: 0.1

# Features
features:
  - name: "context_feature"
    timeframe: 60
    required: true
    params:
      feature_name: "ema_40"
  
  - name: "value_feature"
    timeframe: 60
    required: true
    params:
      feature_name: "bb_pb_20"
  
  - name: "filter_feature"
    timeframe: 60
    required: false
    params:
      feature_name: ""

# Default dataset and timeframe
dataset_id: "CME.MNQ.60m.2020-2024"
timeframe: 60

# Notes
notes: |
  S2 baseline configuration for pullback continuation.
  Context feature: ema_40 (trend indicator)
  Value feature: bb_pb_20 (Bollinger %b, pullback indicator)
  Value threshold: 0.2 (near lower band, expecting bounce)
  Filter mode: NONE (no additional filtering)
  Trigger mode: NONE (market next open entry)
  Migrated from S2.yaml with canonical parameter schema.