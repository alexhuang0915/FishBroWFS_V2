[pytest]
norecursedirs = tests/legacy tests/manual tests/_legacy_ui
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts = -v --tb=short
# NO xdist (-n) allowed: uncontrolled worker spawning violates Phase B governance.
# Use SAFE_PYTEST_ADDOPTS in Makefile for explicit overrides.
markers =
    slow: research-grade tests
    integration: integration tests requiring external services
    research: research-grade / slow / exploratory tests (not part of product CI)
filterwarnings =
    ignore::DeprecationWarning:pydantic._internal._generate_schema:
    ignore::DeprecationWarning:multiprocessing.popen_fork:
    ignore::pydantic.warnings.PydanticDeprecatedSince20
    ignore::pydantic.warnings.PydanticDeprecationWarning
    ignore::UserWarning:pydantic._internal._generate_schema:
    ignore::DeprecationWarning:vbuild
    ignore::numpy.VisibleDeprecationWarning
    ignore::RuntimeWarning:numpy:
    ignore::DeprecationWarning:pipeline.funnel: