{
  "$defs": {
    "GateItemV1": {
      "additionalProperties": false,
      "description": "Individual gate result.",
      "properties": {
        "depends_on": {
          "description": "List of gate_ids this gate depends on (for causal analysis)",
          "items": {
            "type": "string"
          },
          "title": "Depends On",
          "type": "array"
        },
        "details": {
          "anyOf": [
            {
              "additionalProperties": true,
              "type": "object"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Structured telemetry and semantic slots for error details, diagnostics, etc.",
          "title": "Details"
        },
        "evaluated_at_utc": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "ISO-8601 UTC timestamp of gate evaluation",
          "title": "Evaluated At Utc"
        },
        "evaluator": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Component that performed the evaluation",
          "title": "Evaluator"
        },
        "evidence_refs": {
          "description": "References to evidence artifacts (paths, manifest refs, hash refs)",
          "items": {
            "type": "string"
          },
          "title": "Evidence Refs",
          "type": "array"
        },
        "gate_id": {
          "description": "Stable gate identifier (e.g., 'api_health', 'correlation_threshold', 'risk_budget')",
          "title": "Gate Id",
          "type": "string"
        },
        "gate_name": {
          "description": "Human-readable gate title",
          "title": "Gate Name",
          "type": "string"
        },
        "is_primary_fail": {
          "default": false,
          "description": "True if this gate failed and none of its dependencies failed",
          "title": "Is Primary Fail",
          "type": "boolean"
        },
        "is_propagated_fail": {
          "default": false,
          "description": "True if this gate failed and at least one dependency failed",
          "title": "Is Propagated Fail",
          "type": "boolean"
        },
        "message": {
          "description": "Human-readable explanation of gate result",
          "title": "Message",
          "type": "string"
        },
        "reason_codes": {
          "description": "Standardized reason codes for programmatic handling",
          "items": {
            "type": "string"
          },
          "title": "Reason Codes",
          "type": "array"
        },
        "status": {
          "$ref": "#/$defs/GateStatus",
          "description": "Gate evaluation result"
        }
      },
      "required": [
        "gate_id",
        "gate_name",
        "status",
        "message"
      ],
      "title": "GateItemV1",
      "type": "object"
    },
    "GateStatus": {
      "description": "Gate status values.",
      "enum": [
        "PASS",
        "WARN",
        "REJECT",
        "SKIP",
        "UNKNOWN"
      ],
      "title": "GateStatus",
      "type": "string"
    }
  },
  "additionalProperties": false,
  "description": "Consolidated gate summary (Hybrid BC v1.1 Layer1/Layer2).",
  "properties": {
    "counts": {
      "additionalProperties": {
        "type": "integer"
      },
      "description": "Count of gates by status",
      "title": "Counts",
      "type": "object"
    },
    "evaluated_at_utc": {
      "description": "ISO-8601 UTC timestamp of summary evaluation",
      "title": "Evaluated At Utc",
      "type": "string"
    },
    "evaluator": {
      "default": "gate_summary_service",
      "description": "Component that generated this summary",
      "title": "Evaluator",
      "type": "string"
    },
    "gates": {
      "description": "Individual gate results, sorted by gate_id for deterministic ordering",
      "items": {
        "$ref": "#/$defs/GateItemV1"
      },
      "title": "Gates",
      "type": "array"
    },
    "overall_message": {
      "description": "Human-readable summary of overall gate status",
      "title": "Overall Message",
      "type": "string"
    },
    "overall_status": {
      "$ref": "#/$defs/GateStatus",
      "description": "Aggregated status across all gates"
    },
    "schema_version": {
      "default": "v1",
      "description": "Schema version for forward compatibility",
      "title": "Schema Version",
      "type": "string"
    },
    "source": {
      "default": "",
      "description": "Source of gate data (e.g., 'supervisor_api', 'artifact_index')",
      "title": "Source",
      "type": "string"
    }
  },
  "required": [
    "overall_status",
    "overall_message",
    "evaluated_at_utc"
  ],
  "title": "GateSummaryV1",
  "type": "object"
}